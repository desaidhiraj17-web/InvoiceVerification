# Invoice-Verification-Backend

### Setup
    1. Clone the repository:
        git clone repo_link

    2. Create Virtual Environment and install packages:
        python -m venv venv
        venv/Scripts/activate
        cd Invoice-Verification-Backend
        pip install -r requirements/base.txt

    3. For creating tables according to migration files:
        alembic upgrade head

    4. Run the server:
        uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload

### Api endpoints

|    | API’s Name                                                     | Http Method | APIs Endpoint                              | Request Input                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----|----------------------------------------------------------------|-------------|--------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1  | Login api                                                      | POST        | api/auth/login                             | {   "username": "string",   "password": "string" }                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2  | Register api                                                   | POST        | api/auth/register                          | {   "userName": "string",   "name": "string",   "password": "string",   "erpCode": "string",   "installationId": "string",   "clientId": "string",   "email1": "string",   "phone1": "string",   "clientType": "string",   "address": "string",   "city": "string",   "pinCode": "string",   "gst": "string", "_comment": "Below are optional fields",   "email2": "string",   "state": "string",   "phone2": "string",   "pan": "string",   "dl1": "string",   "dl2": "string",   "dl3": "string",   "dl4": "string" } |
| 3  | Refresh Token                                                  | POST        | api/auth/refresh-token                     | {   "refresh_token": "string" }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 4  | Settings API                                                   | GET         | api/settings/                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 5  | Update settings api                                            | PUT         | api/settings/                              | {   "update_quantity_enabled": true,   "picker_enabled": true,   "checker_enabled": true,   "packed_enabled": true,   "rack_enabled": true,   "show_actual_qty": true }                                                                                                                                                                                                                                                                                                                                                 |
| 6  | Health API                                                     | GET         | api/settings/health                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 7  | Generate QR                                                    | GET         | api/settings/generate-qr                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 8  | File upload                                                    | POST        | api/invoices/file_upload                   | file: binary_file,value: invoice/party_master/product_master/rack_master/tray_master                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 9  | Invoices List                                                  | GET         | api/invoices/                              | Parameters: search :  priority: null,1,2,3 from_date: DD-MM-YYYY to_date: DD-MM-YYYY is_verfied: true/false page:1, page_size:10                                                                                                                                                                                                                                                                                                                                                                                        |
| 10 | Get Invoice Products                                           | GET         | api/invoices/{invoice_id}/products         | Parameters: rack_no,page,page_size                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 11 | Change Priority of Invoice                                     | PUT         | api/invoices/{invoice_id}/priority         | Parameters: priority:1/2/3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 12 | Invoice Metadata Update                                        | PUT         | api/invoices/{invoice_id}/invoice_metadata | {   "picker_start": 0,   "picker_end": 0,   "checker_start": 0,   "checker_end": 0,   "packer_start": 0,   "packer_end": 0,   "status": "not_started" }                                                                                                                                                                                                                                                                                                                                                                 |
| 13 | Invoice Product Add or Delete                                  | POST        | api/invoices/{invoice_id}/product          | {   "action": "add" or ”delete”,   "product_id": "string",   "product_name": "string",   "batch_number": "string",   "expiry_date": "string",   "mrp": 0,   "actual_qty": 0,   "scanned_qty": 0,   "rack_no": 0,   "scan_status": "success" }                                                                                                                                                                                                                                                                           |
| 14 | Delete Invoice                                                 | DELETE      | api/invoices/{invoice_id}                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 15 | Adding transactions for multiple products for specific invoice | POST        | api/invoices/transactions/add              | {   "invoice_id": "string",   "rack_id": 0,   "products": [     {       "timestamp": 0,       "operation_type": "scan",       "operation_status": "checker_end",       "scan_status": "success",       "image": "string",       "invoice_product_id": "string"     }   ] }                                                                                                                                                                                                                                              |
| 16 | Performance Dashboard                                          | POST        | api/invoices/performance_dashboard         | {   "from_date": "string",   "to_date": "string",   "operator_id": true,   "invoice_id": "string" }                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 17 | Matches scanned product details against the product master     | POST        | api/products/match/scan                    | {   "invoice_id": "string",   "rack_id": "string",   "batch_number": "string",   "expiry_date": "string",   "mfg_date": "string",   "mrp": 0,   "barcode1": "string",   "barcode2": "string" }                                                                                                                                                                                                                                                                                                                          |
| 18 | Get Products by batch number                                   | GET         | api/products/search/batch_no               | Parameters: batch_number,page,page_size                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 19 | Getting Racks                                                  | GET         | api/products/rack                          | Parameters: page,page_size                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 20 | Product Quantity Converter List                                | GET         | api/products/qty-converter                 | Parameters: page,page_size,search                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 21 | Update Product Quantity Converter                              | PUT         | api/products/qty-converter                 | {   "product_name": "string",   "shipper_val": 0,   "box_val": 0,   "strip_val": 0 }                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 22 | Get Invoice No for tray                                        | GET         | api/products/{tray_no}                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 23 | Update Invoice for tray                                        | PUT         | api/products/tray/{tray_no}/invoice        | {   "invoice_id": "string" }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 24 | Update scan qty for products                                   | PUT         | api/products/scan-quantity                 | {   "invoice_id": "string",   "completed": false,   "products": [     {       "product_name": "string",       "product_id": "string",       "scanned_qty": 0,       "shipper_val": 0,       "box_val": 0,       "strip_val": 0,       "scan_status": "success"     }   ] }                                                                                                                                                                                                                                              |
